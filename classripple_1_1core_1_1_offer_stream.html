<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>RippleD: ripple::core::OfferStream Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LogoForDocumentation.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RippleD
   </div>
   <div id="projectbrief">Ed&#39;s Take On RippleD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceripple.html">ripple</a></li><li class="navelem"><b>core</b></li><li class="navelem"><a class="el" href="classripple_1_1core_1_1_offer_stream.html">OfferStream</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classripple_1_1core_1_1_offer_stream-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::core::OfferStream Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Presents and consumes the offers in an order book.  
 <a href="classripple_1_1core_1_1_offer_stream.html#details">More...</a></p>

<p><code>#include &lt;OfferStream.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acfdc5be8797f1223fccb909e63fd909e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acfdc5be8797f1223fccb909e63fd909e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>OfferStream</b> (<a class="el" href="classripple_1_1_ledger_entry_set.html">LedgerView</a> &amp;view, <a class="el" href="classripple_1_1_ledger_entry_set.html">LedgerView</a> &amp;view_cancel, <a class="el" href="classripple_1_1_book_type.html">BookRef</a> book, Clock::time_point when, beast::Journal journal)</td></tr>
<tr class="separator:acfdc5be8797f1223fccb909e63fd909e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78dda46f1ab42d4de6cfcccef8b9c550"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78dda46f1ab42d4de6cfcccef8b9c550"></a>
<a class="el" href="classripple_1_1_ledger_entry_set.html">LedgerView</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>view</b> () noexcept</td></tr>
<tr class="separator:a78dda46f1ab42d4de6cfcccef8b9c550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add65c742e84a0f805e107e2ff80ac684"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add65c742e84a0f805e107e2ff80ac684"></a>
<a class="el" href="classripple_1_1_ledger_entry_set.html">LedgerView</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>view_cancel</b> () noexcept</td></tr>
<tr class="separator:add65c742e84a0f805e107e2ff80ac684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abeebe8648b7106b34b05812e38c4ca"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8abeebe8648b7106b34b05812e38c4ca"></a>
<a class="el" href="classripple_1_1_book_type.html">Book</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>book</b> () const noexcept</td></tr>
<tr class="separator:a8abeebe8648b7106b34b05812e38c4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6813c5f12000303a5dc230d1d7c0e5"><td class="memItemLeft" align="right" valign="top">Offer const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1core_1_1_offer_stream.html#a4a6813c5f12000303a5dc230d1d7c0e5">tip</a> () const </td></tr>
<tr class="memdesc:a4a6813c5f12000303a5dc230d1d7c0e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the offer at the tip of the order book.  <a href="#a4a6813c5f12000303a5dc230d1d7c0e5">More...</a><br/></td></tr>
<tr class="separator:a4a6813c5f12000303a5dc230d1d7c0e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e73441cbdbd8cfcc418bd1bb6beff57"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1core_1_1_offer_stream.html#a1e73441cbdbd8cfcc418bd1bb6beff57">step</a> ()</td></tr>
<tr class="memdesc:a1e73441cbdbd8cfcc418bd1bb6beff57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance to the next valid offer.  <a href="#a1e73441cbdbd8cfcc418bd1bb6beff57">More...</a><br/></td></tr>
<tr class="separator:a1e73441cbdbd8cfcc418bd1bb6beff57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb0ebea1e259e09a16396b892c9ef6fa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1core_1_1_offer_stream.html#acb0ebea1e259e09a16396b892c9ef6fa">step_account</a> (<a class="el" href="namespaceripple.html#ad93ce73daf065d36da2d9983df26d7b3">Account</a> const &amp;account)</td></tr>
<tr class="memdesc:acb0ebea1e259e09a16396b892c9ef6fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance to the next valid offer that is not from the specified account.  <a href="#acb0ebea1e259e09a16396b892c9ef6fa">More...</a><br/></td></tr>
<tr class="separator:acb0ebea1e259e09a16396b892c9ef6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Presents and consumes the offers in an order book. </p>
<p>Two <code>LedgerView</code> objects accumulate changes to the ledger. <code>view</code> is applied when the calling transaction succeeds. If the calling transaction fails, then <code>view_cancel</code> is applied.</p>
<p>Certain invalid offers are automatically removed:</p>
<ul>
<li>Offers with missing ledger entries</li>
<li>Offers that expired</li>
<li>Offers found unfunded: An offer is found unfunded when the corresponding balance is zero and the caller has not modified the balance. This is accomplished by also looking up the balance in the cancel view.</li>
</ul>
<p>When an offer is removed, it is removed from both views. This grooms the order book regardless of whether or not the transaction is successful. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4a6813c5f12000303a5dc230d1d7c0e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Offer const&amp; ripple::core::OfferStream::tip </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the offer at the tip of the order book. </p>
<p>Offers are always presented in decreasing quality. Only valid if <a class="el" href="classripple_1_1core_1_1_offer_stream.html#a1e73441cbdbd8cfcc418bd1bb6beff57" title="Advance to the next valid offer. ">step()</a> returned <code>true</code>. </p>

</div>
</div>
<a class="anchor" id="a1e73441cbdbd8cfcc418bd1bb6beff57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::core::OfferStream::step </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advance to the next valid offer. </p>
<p>This automatically removes:</p>
<ul>
<li>Offers with missing ledger entries</li>
<li>Offers found unfunded</li>
<li>expired offers <dl class="section return"><dt>Returns</dt><dd><code>true</code> if there is a valid offer. </dd></dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="acb0ebea1e259e09a16396b892c9ef6fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::core::OfferStream::step_account </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceripple.html#ad93ce73daf065d36da2d9983df26d7b3">Account</a> const &amp;&#160;</td>
          <td class="paramname"><em>account</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advance to the next valid offer that is not from the specified account. </p>
<p>This automatically removes:</p>
<ul>
<li>Offers with missing ledger entries</li>
<li>Offers found unfunded</li>
<li>Offers from the same account</li>
<li>Expired offers <dl class="section return"><dt>Returns</dt><dd><code>true</code> if there is a valid offer. </dd></dl>
</li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>OfferStream.h</li>
<li>OfferStream.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
