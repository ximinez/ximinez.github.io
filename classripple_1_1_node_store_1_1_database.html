<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>RippleD: ripple::NodeStore::Database Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LogoForDocumentation.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RippleD
   </div>
   <div id="projectbrief">Ed&#39;s Take On RippleD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceripple.html">ripple</a></li><li class="navelem"><b>NodeStore</b></li><li class="navelem"><a class="el" href="classripple_1_1_node_store_1_1_database.html">Database</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classripple_1_1_node_store_1_1_database-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::NodeStore::Database Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Persistency layer for <a class="el" href="classripple_1_1_node_object.html" title="A simple object that the Ledger uses to store entries. ">NodeObject</a>.  
 <a href="classripple_1_1_node_store_1_1_database.html#details">More...</a></p>

<p><code>#include &lt;Database.h&gt;</code></p>

<p>Inherited by ripple::NodeStore::DatabaseImp.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac0f74f1e8f9f06621f9f1e8fb572ca5c"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#ac0f74f1e8f9f06621f9f1e8fb572ca5c">~Database</a> ()=0</td></tr>
<tr class="memdesc:ac0f74f1e8f9f06621f9f1e8fb572ca5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the node store.  <a href="#ac0f74f1e8f9f06621f9f1e8fb572ca5c">More...</a><br/></td></tr>
<tr class="separator:ac0f74f1e8f9f06621f9f1e8fb572ca5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aa67a0af48b998fa138e1e6298b5e00"><td class="memItemLeft" align="right" valign="top">virtual beast::String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a0aa67a0af48b998fa138e1e6298b5e00">getName</a> () const =0</td></tr>
<tr class="memdesc:a0aa67a0af48b998fa138e1e6298b5e00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the name associated with this backend.  <a href="#a0aa67a0af48b998fa138e1e6298b5e00">More...</a><br/></td></tr>
<tr class="separator:a0aa67a0af48b998fa138e1e6298b5e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94726cd802a99e23c4d494a81d496063"><td class="memItemLeft" align="right" valign="top">virtual NodeObject::pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a94726cd802a99e23c4d494a81d496063">fetch</a> (uint256 const &amp;hash)=0</td></tr>
<tr class="memdesc:a94726cd802a99e23c4d494a81d496063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch an object.  <a href="#a94726cd802a99e23c4d494a81d496063">More...</a><br/></td></tr>
<tr class="separator:a94726cd802a99e23c4d494a81d496063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab11a6e82575ae2a38b8f2bba7a0b9f43"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#ab11a6e82575ae2a38b8f2bba7a0b9f43">asyncFetch</a> (uint256 const &amp;hash, NodeObject::pointer &amp;object)=0</td></tr>
<tr class="memdesc:ab11a6e82575ae2a38b8f2bba7a0b9f43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch an object without waiting.  <a href="#ab11a6e82575ae2a38b8f2bba7a0b9f43">More...</a><br/></td></tr>
<tr class="separator:ab11a6e82575ae2a38b8f2bba7a0b9f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539d10a0f85deee16c500f4e57fa9648"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a539d10a0f85deee16c500f4e57fa9648"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a539d10a0f85deee16c500f4e57fa9648">waitReads</a> ()=0</td></tr>
<tr class="memdesc:a539d10a0f85deee16c500f4e57fa9648"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for all currently pending async reads to complete. <br/></td></tr>
<tr class="separator:a539d10a0f85deee16c500f4e57fa9648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fb091e51bd36690e0652565a54802e9"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a0fb091e51bd36690e0652565a54802e9">getDesiredAsyncReadCount</a> ()=0</td></tr>
<tr class="memdesc:a0fb091e51bd36690e0652565a54802e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the maximum number of async reads the node store prefers.  <a href="#a0fb091e51bd36690e0652565a54802e9">More...</a><br/></td></tr>
<tr class="separator:a0fb091e51bd36690e0652565a54802e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d54d0537134fd3b1cbd4b8fbb6e3c34"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a2d54d0537134fd3b1cbd4b8fbb6e3c34">store</a> (<a class="el" href="namespaceripple.html#ad80549ab348d15a7256fe4182bed139f">NodeObjectType</a> type, std::uint32_t ledgerIndex, <a class="el" href="namespaceripple.html#a1b87ba4732cf1725393e8dd60bf73b0c">Blob</a> &amp;&amp;data, uint256 const &amp;hash)=0</td></tr>
<tr class="memdesc:a2d54d0537134fd3b1cbd4b8fbb6e3c34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the object.  <a href="#a2d54d0537134fd3b1cbd4b8fbb6e3c34">More...</a><br/></td></tr>
<tr class="separator:a2d54d0537134fd3b1cbd4b8fbb6e3c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8968d298143c29a6720acffeb2516aa0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a8968d298143c29a6720acffeb2516aa0">for_each</a> (std::function&lt; void(NodeObject::Ptr)&gt; f)=0</td></tr>
<tr class="memdesc:a8968d298143c29a6720acffeb2516aa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visit every object in the database This is usually called during import.  <a href="#a8968d298143c29a6720acffeb2516aa0">More...</a><br/></td></tr>
<tr class="separator:a8968d298143c29a6720acffeb2516aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1946e6706aecab34d6ea2207a33f6bc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#ac1946e6706aecab34d6ea2207a33f6bc">import</a> (<a class="el" href="classripple_1_1_node_store_1_1_database.html">Database</a> &amp;source)=0</td></tr>
<tr class="memdesc:ac1946e6706aecab34d6ea2207a33f6bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Import objects from another database.  <a href="#ac1946e6706aecab34d6ea2207a33f6bc">More...</a><br/></td></tr>
<tr class="separator:ac1946e6706aecab34d6ea2207a33f6bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabb70be2c6ef7841f534ff9202326e46"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#aabb70be2c6ef7841f534ff9202326e46">getWriteLoad</a> ()=0</td></tr>
<tr class="memdesc:aabb70be2c6ef7841f534ff9202326e46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the estimated number of pending write operations.  <a href="#aabb70be2c6ef7841f534ff9202326e46">More...</a><br/></td></tr>
<tr class="separator:aabb70be2c6ef7841f534ff9202326e46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a105cc1993a6e21fa10b5f35ec837ac89"><td class="memItemLeft" align="right" valign="top">virtual float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a105cc1993a6e21fa10b5f35ec837ac89">getCacheHitRate</a> ()=0</td></tr>
<tr class="memdesc:a105cc1993a6e21fa10b5f35ec837ac89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the positive cache hits to total attempts ratio.  <a href="#a105cc1993a6e21fa10b5f35ec837ac89">More...</a><br/></td></tr>
<tr class="separator:a105cc1993a6e21fa10b5f35ec837ac89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a8841ded0392b729e929efeddc58f6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a81a8841ded0392b729e929efeddc58f6">tune</a> (int size, int age)=0</td></tr>
<tr class="memdesc:a81a8841ded0392b729e929efeddc58f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the maximum number of entries and maximum cache age for both caches.  <a href="#a81a8841ded0392b729e929efeddc58f6">More...</a><br/></td></tr>
<tr class="separator:a81a8841ded0392b729e929efeddc58f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40a0e5a30857e9ba3c7561748af31e29"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1_node_store_1_1_database.html#a40a0e5a30857e9ba3c7561748af31e29">sweep</a> ()=0</td></tr>
<tr class="memdesc:a40a0e5a30857e9ba3c7561748af31e29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove expired entries from the positive and negative caches.  <a href="#a40a0e5a30857e9ba3c7561748af31e29">More...</a><br/></td></tr>
<tr class="separator:a40a0e5a30857e9ba3c7561748af31e29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Persistency layer for <a class="el" href="classripple_1_1_node_object.html" title="A simple object that the Ledger uses to store entries. ">NodeObject</a>. </p>
<p>A Node is a ledger object which is uniquely identified by a key, which is the 256-bit hash of the body of the node. The payload is a variable length block of serialized data.</p>
<p>All ledger data is stored as node objects and as such, needs to be persisted between launches. Furthermore, since the set of node objects will in general be larger than the amount of available memory, purged node objects which are later accessed must be retrieved from the node store.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classripple_1_1_node_object.html" title="A simple object that the Ledger uses to store entries. ">NodeObject</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac0f74f1e8f9f06621f9f1e8fb572ca5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ripple::NodeStore::Database::~Database </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy the node store. </p>
<p>All pending operations are completed, pending writes flushed, and files closed before this returns. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0aa67a0af48b998fa138e1e6298b5e00"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual beast::String ripple::NodeStore::Database::getName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the name associated with this backend. </p>
<p>This is used for diagnostics and may not reflect the actual path or paths used by the underlying backend. </p>

</div>
</div>
<a class="anchor" id="a94726cd802a99e23c4d494a81d496063"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual NodeObject::pointer ripple::NodeStore::Database::fetch </td>
          <td>(</td>
          <td class="paramtype">uint256 const &amp;&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch an object. </p>
<p>If the object is known to be not in the database, isn't found in the database during the fetch, or failed to load correctly during the fetch, <code>nullptr</code> is returned.</p>
<dl class="section note"><dt>Note</dt><dd>This can be called concurrently. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The key of the object to retrieve. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The object, or nullptr if it couldn't be retrieved. </dd></dl>

</div>
</div>
<a class="anchor" id="ab11a6e82575ae2a38b8f2bba7a0b9f43"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool ripple::NodeStore::Database::asyncFetch </td>
          <td>(</td>
          <td class="paramtype">uint256 const &amp;&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NodeObject::pointer &amp;&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch an object without waiting. </p>
<p>If I/O is required to determine whether or not the object is present, <code>false</code> is returned. Otherwise, <code>true</code> is returned and <code>object</code> is set to refer to the object, or <code>nullptr</code> if the object is not present. If I/O is required, the I/O is scheduled.</p>
<dl class="section note"><dt>Note</dt><dd>This can be called concurrently. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The key of the object to retrieve </td></tr>
    <tr><td class="paramname">object</td><td>The object retrieved </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the operation completed </dd></dl>

</div>
</div>
<a class="anchor" id="a0fb091e51bd36690e0652565a54802e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int ripple::NodeStore::Database::getDesiredAsyncReadCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the maximum number of async reads the node store prefers. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of async reads preferred. </dd></dl>

</div>
</div>
<a class="anchor" id="a2d54d0537134fd3b1cbd4b8fbb6e3c34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ripple::NodeStore::Database::store </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceripple.html#ad80549ab348d15a7256fe4182bed139f">NodeObjectType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>ledgerIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceripple.html#a1b87ba4732cf1725393e8dd60bf73b0c">Blob</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint256 const &amp;&#160;</td>
          <td class="paramname"><em>hash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the object. </p>
<p>The caller's Blob parameter is overwritten.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The type of object. </td></tr>
    <tr><td class="paramname">ledgerIndex</td><td>The ledger in which the object appears. </td></tr>
    <tr><td class="paramname">data</td><td>The payload of the object. The caller's variable is overwritten. </td></tr>
    <tr><td class="paramname">hash</td><td>The 256-bit hash of the payload data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the object was stored? </dd></dl>

</div>
</div>
<a class="anchor" id="a8968d298143c29a6720acffeb2516aa0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ripple::NodeStore::Database::for_each </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void(NodeObject::Ptr)&gt;&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Visit every object in the database This is usually called during import. </p>
<dl class="section note"><dt>Note</dt><dd>This routine will not be called concurrently with itself or other methods. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classripple_1_1_node_store_1_1_database.html#ac1946e6706aecab34d6ea2207a33f6bc" title="Import objects from another database. ">import</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ac1946e6706aecab34d6ea2207a33f6bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ripple::NodeStore::Database::import </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1_node_store_1_1_database.html">Database</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Import objects from another database. </p>

</div>
</div>
<a class="anchor" id="aabb70be2c6ef7841f534ff9202326e46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int ripple::NodeStore::Database::getWriteLoad </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the estimated number of pending write operations. </p>
<p>This is used for diagnostics. </p>

</div>
</div>
<a class="anchor" id="a105cc1993a6e21fa10b5f35ec837ac89"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual float ripple::NodeStore::Database::getCacheHitRate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the positive cache hits to total attempts ratio. </p>

</div>
</div>
<a class="anchor" id="a81a8841ded0392b729e929efeddc58f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ripple::NodeStore::Database::tune </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>age</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the maximum number of entries and maximum cache age for both caches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Number of cache entries (0 = ignore) </td></tr>
    <tr><td class="paramname">age</td><td>Maximum cache age in seconds </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a40a0e5a30857e9ba3c7561748af31e29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ripple::NodeStore::Database::sweep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove expired entries from the positive and negative caches. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nodestore/Database.h</li>
<li>nodestore/impl/Database.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
